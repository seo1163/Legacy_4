<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.iu.s1.qna.QnaDAO">

	<update id="update" parameterType="QnaDTO">
		UPDATE QNA SET TITLE=#{title}, CONTENTS=#{contents}, WRITER=#{writer}
		WHERE NUM=#{num}
	</update>

	<delete id="delete" parameterType="QnaDTO">
		DELETE QNA WHERE NUM=#{num}
	</delete>

	<insert id="add" parameterType="QnaDTO">
		INSERT INTO QNA(NUM, WRITER, TITLE, CONTENTS, REGDATE, HIT, REF, STEP,
		DEPTH)
		VALUES (QNA_SEQ.NEXTVAL, 'T1', 'C1', 'W1', SYSDATE, QNA_SEQ.NEXTVAL, 0, 0, 0
		)
	</insert>

	<select id="detail" parameterType="QnaDTO" resultType="QnaDTO">
		SELECT*FROM QNA WHERE NUM=#{num}
	</select>

	<select id="list" parameterType="Pager" resultType="QnaDTO">
		SELECT*FROM
		(SELECT ROWNUM R,B.*FROM
		(SELECT*FROM QNA WHERE NUM>0 ORDER BY NUM DESC)B)
		WHERE R BETWEEN #{startRow} AND #{lastRow}
	</select>

	<select id="total" resultType="LONG" >
		SELECT COUNT (NUM) FROM QNA


	</select>

</mapper>